<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Understanding NPM</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/mdn-article.css"></head><body><article class="h-entry">
<header>
<h1 class="p-name">Understanding NPM</h1>
</header>
<section data-field="subtitle" class="p-summary">
npm is the package manager for the Node JavaScript platform. It puts modules in place so that node can find them, and manages dependency…
</section>
<section data-field="body" class="e-content">
<section name="7d0a" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="be9d" id="be9d" class="graf graf--h3 graf--leading graf--title">Understanding NPM</h3><h4 name="7c13" id="7c13" class="graf graf--h4 graf-after--h3 graf--subtitle">npm is the package manager for the Node JavaScript platform. It puts modules in place so that node can find them, and manages dependency conflicts intelligently.</h4><figure name="2da1" id="2da1" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="0*ZKmH9MuKyXQcMaK4.gif" data-width="600" data-height="400" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*ZKmH9MuKyXQcMaK4.gif"></figure><p name="450c" id="450c" class="graf graf--p graf-after--figure">It is extremely configurable to support a wide variety of use cases. Most commonly, it is used to publish, discover, install, and develop node programs.</p><p name="72ef" id="72ef" class="graf graf--p graf-after--p">Run <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm help</strong></code> to get a list of available commands.</p><h3 name="c42f" id="c42f" class="graf graf--h3 graf-after--p">Important</h3><p name="e299" id="e299" class="graf graf--p graf-after--h3">npm is configured to use npm, Inc.’s public registry at <a href="https://registry.npmjs.org/" data-href="https://registry.npmjs.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://registry.npmjs.org</a> by default. Use of the npm public registry is subject to terms of use available at <a href="https://www.npmjs.com/policies/terms" data-href="https://www.npmjs.com/policies/terms" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://www.npmjs.com/policies/terms</a>.</p><p name="c3d9" id="c3d9" class="graf graf--p graf-after--p">You can configure npm to use any compatible registry you like, and even run your own registry. Use of someone else’s registry may be governed by their terms of use.</p><figure name="7a4f" id="7a4f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*9m5wxJihiRIRLy0c.gif" data-width="1600" data-height="1200" src="https://cdn-images-1.medium.com/max/800/0*9m5wxJihiRIRLy0c.gif"></figure><h3 name="d4b6" id="d4b6" class="graf graf--h3 graf-after--figure">Introduction</h3><p name="669c" id="669c" class="graf graf--p graf-after--h3">You probably got npm because you want to install stuff.</p><p name="7f66" id="7f66" class="graf graf--p graf-after--p">Use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install blerg</strong></code> to install the latest version of &quot;blerg&quot;. Check out <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/cli-commands/npm-install" data-href="http://127.0.0.1:5500/public/cli-commands/npm-install" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npm install</a></code> for more info. It can do a lot of stuff.</p><p name="8201" id="8201" class="graf graf--p graf-after--p">Use the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm search</strong></code> command to show everything that&#39;s available. Use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm ls</strong></code> to show everything you&#39;ve installed.</p><h3 name="a84d" id="a84d" class="graf graf--h3 graf-after--p">Dependencies</h3><p name="08f3" id="08f3" class="graf graf--p graf-after--h3">If a package references to another package with a git URL, npm depends on a preinstalled git.</p><p name="9d26" id="9d26" class="graf graf--p graf-after--p">If one of the packages npm tries to install is a native node module and requires compiling of C++ Code, npm will use <a href="https://github.com/nodejs/node-gyp" data-href="https://github.com/nodejs/node-gyp" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">node-gyp</a> for that task. For a Unix system, <a href="https://github.com/nodejs/node-gyp" data-href="https://github.com/nodejs/node-gyp" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">node-gyp</a> needs Python, make and a buildchain like GCC. On Windows, Python and Microsoft Visual Studio C++ are needed. For more information visit <a href="https://github.com/nodejs/node-gyp" data-href="https://github.com/nodejs/node-gyp" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">the node-gyp repository</a> and the <a href="https://github.com/nodejs/node-gyp/wiki" data-href="https://github.com/nodejs/node-gyp/wiki" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">node-gyp Wiki</a>.</p><h3 name="edf7" id="edf7" class="graf graf--h3 graf-after--p">Directories</h3><p name="9e26" id="9e26" class="graf graf--p graf-after--h3">See <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/configuring-npm/folders" data-href="http://127.0.0.1:5500/public/configuring-npm/folders" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">folders</a></code> to learn about where npm puts stuff.</p><p name="496f" id="496f" class="graf graf--p graf-after--p">In particular, npm has two modes of operation:</p><ul class="postList"><li name="e073" id="e073" class="graf graf--li graf-after--p">global mode: npm installs packages into the install prefix at <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prefix/lib/node_modules</strong></code> and bins are installed in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prefix/bin</strong></code>.</li><li name="20a4" id="20a4" class="graf graf--li graf-after--li">local mode: npm installs packages into the current project directory, which defaults to the current working directory. Packages are installed to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">./node_modules</strong></code>, and bins are installed to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">./node_modules/.bin</strong></code>.</li></ul><p name="0e97" id="0e97" class="graf graf--p graf-after--li">Local mode is the default. Use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">-g</strong></code> or <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--global</strong></code> on any command to operate in global mode instead.</p><h3 name="50dd" id="50dd" class="graf graf--h3 graf-after--p">Developer Usage</h3><p name="fbc0" id="fbc0" class="graf graf--p graf-after--h3">If you’re using npm to develop and publish your code, check out the following help topics:</p><ul class="postList"><li name="0211" id="0211" class="graf graf--li graf-after--p">json: Make a package.json file. See <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/configuring-npm/package.json" data-href="http://127.0.0.1:5500/public/configuring-npm/package.json" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">package.json</a></code>.</li><li name="4edd" id="4edd" class="graf graf--li graf-after--li">link: For linking your current working code into Node’s path, so that you don’t have to reinstall every time you make a change. Use <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm link</strong></code> to do this.</li><li name="b6f6" id="b6f6" class="graf graf--li graf-after--li">install: It’s a good idea to install things if you don’t need the symbolic link. Especially, installing other peoples code from the registry is done via <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install</strong></code></li><li name="f15a" id="f15a" class="graf graf--li graf-after--li">adduser: Create an account or log in. Credentials are stored in the user config file.</li><li name="e374" id="e374" class="graf graf--li graf-after--li">publish: Use the <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm publish</strong></code> command to upload your code to the registry.</li></ul><h4 name="a713" id="a713" class="graf graf--h4 graf-after--li">Configuration</h4><p name="21d4" id="21d4" class="graf graf--p graf-after--h4">npm is extremely configurable. It reads its configuration options from 5 places.</p><ul class="postList"><li name="600e" id="600e" class="graf graf--li graf-after--p">Command line switches: Set a config with <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">--key val</strong></code>. All keys take a value, even if they are booleans (the config parser doesn&#39;t know what the options are at the time of parsing). If no value is provided, then the option is set to boolean <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">true</strong></code>.</li><li name="8b92" id="8b92" class="graf graf--li graf-after--li">Environment Variables: Set any config by prefixing the name in an environment variable with <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm_config_</strong></code>. For example, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">export npm_config_key=val</strong></code>.</li><li name="5960" id="5960" class="graf graf--li graf-after--li">User Configs: The file at $HOME/.npmrc is an ini-formatted list of configs. If present, it is parsed. If the <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">userconfig</strong></code> option is set in the cli or env, then that will be used instead.</li><li name="dc52" id="dc52" class="graf graf--li graf-after--li">Global Configs: The file found at ../etc/npmrc (from the node executable, by default this resolves to /usr/local/etc/npmrc) will be parsed if it is found. If the <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">globalconfig</strong></code> option is set in the cli, env, or user config, then that file is parsed instead.</li><li name="55ff" id="55ff" class="graf graf--li graf-after--li">Defaults: npm’s default configuration options are defined in lib/utils/config-defs.js. These must not be changed.</li></ul><h3 name="30e6" id="30e6" class="graf graf--h3 graf-after--li">Synopsis</h3><pre name="3f0f" id="3f0f" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm audit [--json|--parseable|--audit-level=(low|moderate|high|critical)]<br>npm audit fix [--force|--package-lock-only|--dry-run]</code></pre><pre name="b5bd" id="b5bd" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">common options: [--production] [--only=(dev|prod)]</code></pre><h3 name="3a8a" id="3a8a" class="graf graf--h3 graf-after--pre">Examples</h3><p name="6c60" id="6c60" class="graf graf--p graf-after--h3">Scan your project for vulnerabilities and automatically install any compatible updates to vulnerable dependencies:</p><pre name="ac68" id="ac68" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit fix</code></pre><p name="aac2" id="aac2" class="graf graf--p graf-after--pre">Run <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">audit fix</strong></code> without modifying <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code>, but still updating the pkglock:</p><pre name="3343" id="3343" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit fix --package-lock-only</code></pre><p name="70e3" id="70e3" class="graf graf--p graf-after--pre">Skip updating <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">devDependencies</strong></code>:</p><pre name="ba0a" id="ba0a" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit fix --only=prod</code></pre><p name="4d55" id="4d55" class="graf graf--p graf-after--pre">Have <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">audit fix</strong></code> install semver-major updates to toplevel dependencies, not just semver-compatible ones:</p><pre name="71b4" id="71b4" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit fix --force</code></pre><p name="dd17" id="dd17" class="graf graf--p graf-after--pre">Do a dry run to get an idea of what <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">audit fix</strong></code> will do, and also output install information in JSON format:</p><pre name="7677" id="7677" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit fix --dry-run --json</code></pre><p name="5dcf" id="5dcf" class="graf graf--p graf-after--pre">Scan your project for vulnerabilities and just show the details, without fixing anything:</p><pre name="be42" id="be42" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit</code></pre><p name="7dca" id="7dca" class="graf graf--p graf-after--pre">Get the detailed audit report in JSON format:</p><pre name="f307" id="f307" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit --json</code></pre><p name="ad65" id="ad65" class="graf graf--p graf-after--pre">Get the detailed audit report in plain text result, separated by tab characters, allowing for future reuse in scripting or command line post processing, like for example, selecting some of the columns printed:</p><pre name="6656" id="6656" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit --parseable</code></pre><p name="0222" id="0222" class="graf graf--p graf-after--pre">To parse columns, you can use for example <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">awk</strong></code>, and just print some of them:</p><pre name="e84f" id="e84f" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit --parseable | awk -F $&#39;\t&#39; &#39;{print $1,$4}&#39;</code></pre><p name="3569" id="3569" class="graf graf--p graf-after--pre">Fail an audit only if the results include a vulnerability with a level of moderate or higher:</p><pre name="068a" id="068a" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm audit --audit-level=moderate</code></pre><h3 name="cf4b" id="cf4b" class="graf graf--h3 graf-after--pre">Description</h3><blockquote name="9571" id="9571" class="graf graf--pullquote graf--hasDropCapModel graf-after--h3">The audit command submits a description of the dependencies configured in your project to your default registry and asks for a report of known vulnerabilities. The report returned includes instructions on how to act on this information. The command will exit with a 0 exit code if no vulnerabilities were found.</blockquote><p name="b4af" id="b4af" class="graf graf--p graf-after--pullquote"><strong class="markup--strong markup--p-strong">You can also have npm automatically fix the vulnerabilities by running </strong><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm audit fix</strong></code>. Note that some vulnerabilities cannot be fixed automatically and will require manual intervention or review. Also note that since <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm audit fix</strong></code> runs a full-fledged <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code> under the hood, all configs that apply to the installer will also apply to <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code> -- so things like <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm audit fix --package-lock-only</strong></code> will work as expected.</p><p name="f03e" id="f03e" class="graf graf--p graf-after--p">By default, the audit command will exit with a non-zero code if any vulnerability is found. It may be useful in CI environments to include the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--audit-level</strong></code> parameter to specify the minimum vulnerability level that will cause the command to fail. This option does not filter the report output, it simply changes the command&#39;s failure threshold.</p><h3 name="c3e1" id="c3e1" class="graf graf--h3 graf-after--p">Content Submitted</h3><ul class="postList"><li name="754e" id="754e" class="graf graf--li graf-after--h3">npm_version</li><li name="fac8" id="fac8" class="graf graf--li graf-after--li">node_version</li><li name="ef57" id="ef57" class="graf graf--li graf-after--li">platform</li><li name="373e" id="373e" class="graf graf--li graf-after--li">node_env</li><li name="a765" id="a765" class="graf graf--li graf-after--li">A scrubbed version of your package-lock.json or npm-shrinkwrap.json</li></ul><h4 name="0648" id="0648" class="graf graf--h4 graf-after--li">Scrubbing</h4><p name="13b2" id="13b2" class="graf graf--p graf-after--h4">In order to ensure that potentially sensitive information is not included in the audit data bundle, some dependencies may have their names (and sometimes versions) replaced with opaque non-reversible identifiers. It is done for the following dependency types:</p><ul class="postList"><li name="0763" id="0763" class="graf graf--li graf-after--p">Any module referencing a scope that is configured for a non-default registry has its name scrubbed. (That is, a scope you did a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm login --scope=@ourscope</strong></code> for.)</li><li name="0046" id="0046" class="graf graf--li graf-after--li">All git dependencies have their names and specifiers scrubbed.</li><li name="0f8f" id="0f8f" class="graf graf--li graf-after--li">All remote tarball dependencies have their names and specifiers scrubbed.</li><li name="6ae2" id="6ae2" class="graf graf--li graf-after--li">All local directory and tarball dependencies have their names and specifiers scrubbed.</li></ul><p name="23ff" id="23ff" class="graf graf--p graf-after--li graf--trailing">The non-reversible identifiers are a sha256 of a session-specific UUID and the value being replaced, ensuring a consistent value within the payload that is different between runs.</p></div></div></section><section name="2fed" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2a40" id="2a40" class="graf graf--h3 graf--leading">Exit Code</h3><p name="496b" id="496b" class="graf graf--p graf-after--h3">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm audit</strong></code> command will exit with a 0 exit code if no vulnerabilities were found.</p><p name="8fd7" id="8fd7" class="graf graf--p graf-after--p graf--trailing">If vulnerabilities were found the exit code will depend on the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">audit-level</strong></code> configuration setting.</p></div></div></section><section name="1055" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9671" id="9671" class="graf graf--h3 graf--leading">Synopsis</h3><pre name="a3cf" id="a3cf" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm build [&lt;package-folder&gt;]</code></pre><ul class="postList"><li name="69ab" id="69ab" class="graf graf--li graf-after--pre"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;package-folder&gt;</strong></code>: A folder containing a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package.json</strong></code> file in its root.</li></ul><h3 name="725c" id="725c" class="graf graf--h3 graf-after--li">Description</h3><p name="b781" id="b781" class="graf graf--p graf-after--h3">This is the plumbing command called by <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm link</strong></code> and <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code>.</p><p name="7cae" id="7cae" class="graf graf--p graf-after--p">It should generally be called during installation, but if you need to run it directly, run:</p><pre name="5869" id="5869" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">npm run-script build</code></pre><p name="0a5b" id="0a5b" class="graf graf--p graf-after--pre">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm bundle</strong></code> command has been removed in 1.0, for the simple reason that it is no longer necessary, as the default behavior is now to install packages into the local space.</p><p name="fa01" id="fa01" class="graf graf--p graf-after--p graf--trailing">Just use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code> now to do what <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm bundle</strong></code> used to do.</p></div></div></section><section name="f8b1" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="0cba" id="0cba" class="graf graf--h3 graf--leading">npm cache</h3><h4 name="6ee6" id="6ee6" class="graf graf--h4 graf-after--h3">Manipulates packages cache</h4><h3 name="d67d" id="d67d" class="graf graf--h3 graf-after--h4">Synopsis</h3><pre name="3d89" id="3d89" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm cache add &lt;tarball file&gt;<br>npm cache add &lt;folder&gt;<br>npm cache add &lt;tarball url&gt;<br>npm cache add &lt;name&gt;@&lt;version&gt;</code></pre><pre name="4c3a" id="4c3a" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">npm cache clean [&lt;path&gt;]<br>aliases: npm cache clear, npm cache rm</code></pre><pre name="6e60" id="6e60" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">npm cache verify</code></pre><h3 name="602e" id="602e" class="graf graf--h3 graf-after--pre">Description</h3><p name="e3d5" id="e3d5" class="graf graf--p graf-after--h3">Used to add, list, or clean the npm cache folder.</p><ul class="postList"><li name="ffac" id="ffac" class="graf graf--li graf-after--p">add: Add the specified package to the local cache. This command is primarily intended to be used internally by npm, but it can provide a way to add data to the local installation cache explicitly.</li><li name="0f00" id="0f00" class="graf graf--li graf-after--li">clean: Delete all data out of the cache folder.</li><li name="4d73" id="4d73" class="graf graf--li graf-after--li">verify: Verify the contents of the cache folder, garbage collecting any unneeded data, and verifying the integrity of the cache index and all cached data.</li></ul><h3 name="6cd3" id="6cd3" class="graf graf--h3 graf-after--li">Details</h3><p name="39dc" id="39dc" class="graf graf--p graf-after--h3">npm stores cache data in an opaque directory within the configured <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">cache</strong></code>, named <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">_cacache</strong></code>. This directory is a <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">cacache</strong></code>-based content-addressable cache that stores all http request data as well as other package-related data. This directory is primarily accessed through <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">pacote</strong></code>, the library responsible for all package fetching as of npm@5.</p><p name="72be" id="72be" class="graf graf--p graf-after--p">All data that passes through the cache is fully verified for integrity on both insertion and extraction. Cache corruption will either trigger an error, or signal to <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">pacote</strong></code> that the data must be refetched, which it will do automatically. For this reason, it should never be necessary to clear the cache for any reason other than reclaiming disk space, thus why <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">clean</strong></code> now requires <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--force</strong></code> to run.</p><p name="78f7" id="78f7" class="graf graf--p graf-after--p">There is currently no method exposed through npm to inspect or directly manage the contents of this cache. In order to access it, <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">cacache</strong></code> must be used directly.</p><p name="d043" id="d043" class="graf graf--p graf-after--p">npm will not remove data by itself: the cache will grow as new packages are installed.</p><h3 name="e24a" id="e24a" class="graf graf--h3 graf-after--p">A note about the cache’s design</h3><p name="9f08" id="9f08" class="graf graf--p graf-after--h3">The npm cache is strictly a cache: it should not be relied upon as a persistent and reliable data store for package data. npm makes no guarantee that a previously-cached piece of data will be available later, and will automatically delete corrupted contents. The primary guarantee that the cache makes is that, if it does return data, that data will be exactly the data that was inserted.</p><p name="7839" id="7839" class="graf graf--p graf-after--p">To run an offline verification of existing cache contents, use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm cache verify</strong></code>.</p><h3 name="f5d6" id="f5d6" class="graf graf--h3 graf-after--p">Configuration</h3><h4 name="9865" id="9865" class="graf graf--h4 graf-after--h3">cache</h4><p name="c37f" id="c37f" class="graf graf--p graf-after--h4">Default: <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">~/.npm</strong></code> on Posix, or <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">%AppData%/npm-cache</strong></code> on Windows.</p><p name="4704" id="4704" class="graf graf--p graf-after--p">The root cache folder.</p><h3 name="e8f2" id="e8f2" class="graf graf--h3 graf-after--p">npm ci</h3><h3 name="d163" id="d163" class="graf graf--h3 graf-after--h3">Install a project with a clean slate</h3><h3 name="edf8" id="edf8" class="graf graf--h3 graf-after--h3">Synopsis</h3><pre name="8d00" id="8d00" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm ci</code></pre><h3 name="f38a" id="f38a" class="graf graf--h3 graf-after--pre">Example</h3><p name="b4fc" id="b4fc" class="graf graf--p graf-after--h3">Make sure you have a package-lock and an up-to-date install:</p><pre name="e71d" id="e71d" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ cd ./my/npm/project<br>$ npm install<br>added 154 packages in 10s<br>$ ls | grep package-lock</code></pre><p name="754c" id="754c" class="graf graf--p graf-after--pre">Run <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm ci</strong></code> in that project</p><pre name="3b64" id="3b64" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm ci<br>added 154 packages in 5s</code></pre><p name="edaf" id="edaf" class="graf graf--p graf-after--pre">Configure Travis to build using <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm ci</strong></code> instead of <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code>:</p><pre name="0596" id="0596" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code"># .travis.yml<br>install:<br>- npm ci<br># keep the npm cache around to speed up installs<br>cache:<br>  directories:<br>  - &quot;$HOME/.npm&quot;</code></pre><h3 name="5d9c" id="5d9c" class="graf graf--h3 graf-after--pre">Description</h3><p name="ec26" id="ec26" class="graf graf--p graf-after--h3">This command is similar to <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/cli-commands/npm-install" data-href="http://127.0.0.1:5500/public/cli-commands/npm-install" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npm install</a></code>, except it&#39;s meant to be used in automated environments such as test platforms, continuous integration, and deployment -- or any situation where you want to make sure you&#39;re doing a clean install of your dependencies. It can be significantly faster than a regular npm install by skipping certain user-oriented features. It is also more strict than a regular install, which can help catch errors or inconsistencies caused by the incrementally-installed local environments of most npm users.</p><p name="3751" id="3751" class="graf graf--p graf-after--p">In short, the main differences between using <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install</strong></code> and <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm ci</strong></code> are:</p><ul class="postList"><li name="8cf0" id="8cf0" class="graf graf--li graf-after--p">The project <strong class="markup--strong markup--li-strong">must</strong> have an existing <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package-lock.json</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm-shrinkwrap.json</strong></code>.</li><li name="fb09" id="fb09" class="graf graf--li graf-after--li">If dependencies in the package lock do not match those in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package.json</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm ci</strong></code> will exit with an error, instead of updating the package lock.</li><li name="a1d5" id="a1d5" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm ci</strong></code> can only install entire projects at a time: individual dependencies cannot be added with this command.</li><li name="a666" id="a666" class="graf graf--li graf-after--li">If a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">node_modules</strong></code> is already present, it will be automatically removed before <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm ci</strong></code> begins its install.</li><li name="2bcb" id="2bcb" class="graf graf--li graf-after--li graf--trailing">It will never write to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package.json</strong></code> or any of the package-locks: installs are essentially frozen.</li></ul></div></div></section><section name="4b41" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="52c5" id="52c5" class="graf graf--h3 graf--leading">npm config</h3><h3 name="a266" id="a266" class="graf graf--h3 graf-after--h3">Manage the npm configuration files</h3><h3 name="ce0c" id="ce0c" class="graf graf--h3 graf-after--h3">Synopsis</h3><pre name="de5d" id="de5d" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm config set &lt;key&gt; &lt;value&gt; [-g|--global]<br>npm config get &lt;key&gt;<br>npm config delete &lt;key&gt;<br>npm config list [-l] [--json]<br>npm config edit<br>npm get &lt;key&gt;<br>npm set &lt;key&gt; &lt;value&gt; [-g|--global]</code></pre><pre name="94f0" id="94f0" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">aliases: c</code></pre><h3 name="545f" id="545f" class="graf graf--h3 graf-after--pre">Description</h3><p name="5911" id="5911" class="graf graf--p graf-after--h3">npm gets its config settings from the command line, environment variables, <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npmrc</strong></code> files, and in some cases, the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package.json</strong></code> file.</p><p name="f911" id="f911" class="graf graf--p graf-after--p">See <a href="http://127.0.0.1:5500/public/configuring-npm/npmrc" data-href="http://127.0.0.1:5500/public/configuring-npm/npmrc" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npmrc</a> for more information about the npmrc files.</p><p name="e835" id="e835" class="graf graf--p graf-after--p">See <a href="http://127.0.0.1:5500/public/using-npm/config" data-href="http://127.0.0.1:5500/public/using-npm/config" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">config</a> for a more thorough discussion of the mechanisms involved.</p><p name="febb" id="febb" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm config</strong></code> command can be used to update and edit the contents of the user and global npmrc files.</p><h3 name="c892" id="c892" class="graf graf--h3 graf-after--p">Sub-commands</h3><p name="a554" id="a554" class="graf graf--p graf-after--h3">Config supports the following sub-commands:</p><h4 name="723d" id="723d" class="graf graf--h4 graf-after--p">set</h4><pre name="aa61" id="aa61" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm config set key value</code></pre><p name="adba" id="adba" class="graf graf--p graf-after--pre">Sets the config key to the value.</p><p name="d455" id="d455" class="graf graf--p graf-after--p">If value is omitted, then it sets it to “true”.</p><h4 name="c523" id="c523" class="graf graf--h4 graf-after--p">get</h4><pre name="8a26" id="8a26" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm config get key</code></pre><p name="93a1" id="93a1" class="graf graf--p graf-after--pre">Echo the config value to stdout.</p><h4 name="8817" id="8817" class="graf graf--h4 graf-after--p">list</h4><pre name="5416" id="5416" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm config list</code></pre><p name="b73b" id="b73b" class="graf graf--p graf-after--pre">Show all the config settings. Use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">-l</strong></code> to also show defaults. Use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--json</strong></code> to show the settings in json format.</p><h4 name="d4d0" id="d4d0" class="graf graf--h4 graf-after--p">delete</h4><pre name="5ae3" id="5ae3" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm config delete key</code></pre><p name="6a61" id="6a61" class="graf graf--p graf-after--pre">Deletes the key from all configuration files.</p><h4 name="06b7" id="06b7" class="graf graf--h4 graf-after--p">edit</h4><pre name="6e66" id="6e66" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm config edit</code></pre><p name="5a39" id="5a39" class="graf graf--p graf-after--pre graf--trailing">Opens the config file in an editor. Use the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--global</strong></code> flag to edit the global config.</p></div></div></section><section name="5993" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="abec" id="abec" class="graf graf--h3 graf--leading">npm init</h3><h4 name="a6bc" id="a6bc" class="graf graf--h4 graf-after--h3">create a package.json file</h4><h4 name="70be" id="70be" class="graf graf--h4 graf-after--h4">Synopsis</h4><pre name="ef92" id="ef92" class="graf graf--pre graf-after--h4"><code class="markup--code markup--pre-code">npm init [--force|-f|--yes|-y|--scope]<br>npm init &lt;@scope&gt; (same as `npx &lt;@scope&gt;/create`)<br>npm init [&lt;@scope&gt;/]&lt;name&gt; (same as `npx [&lt;@scope&gt;/]create-&lt;name&gt;`)</code></pre><h3 name="6f70" id="6f70" class="graf graf--h3 graf-after--pre">Examples</h3><p name="0642" id="0642" class="graf graf--p graf-after--h3">Create a new React-based project using <code class="markup--code markup--p-code"><a href="https://npm.im/create-react-app" data-href="https://npm.im/create-react-app" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">create-react-app</a></code>:</p><pre name="bd25" id="bd25" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm init react-app ./my-react-app</code></pre><p name="151b" id="151b" class="graf graf--p graf-after--pre">Create a new <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">esm</strong></code>-compatible package using <code class="markup--code markup--p-code"><a href="https://npm.im/create-esm" data-href="https://npm.im/create-esm" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">create-esm</a></code>:</p><pre name="984d" id="984d" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ mkdir my-esm-lib &amp;&amp; cd my-esm-lib<br>$ npm init esm --yes</code></pre><p name="af7d" id="af7d" class="graf graf--p graf-after--pre">Generate a plain old package.json using legacy init:</p><pre name="bc57" id="bc57" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ mkdir my-npm-pkg &amp;&amp; cd my-npm-pkg<br>$ git init<br>$ npm init</code></pre><p name="5996" id="5996" class="graf graf--p graf-after--pre">Generate it without having it ask any questions:</p><pre name="74c0" id="74c0" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">$ npm init -y</code></pre><h3 name="d0b8" id="d0b8" class="graf graf--h3 graf-after--pre">Description</h3><p name="5402" id="5402" class="graf graf--p graf-after--h3"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm init &lt;initializer&gt;</strong></code> can be used to set up a new or existing npm package.</p><p name="0a21" id="0a21" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">initializer</strong></code> in this case is an npm package named <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">create-&lt;initializer&gt;</strong></code>, which will be installed by <code class="markup--code markup--p-code"><a href="https://npm.im/npx" data-href="https://npm.im/npx" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npx</a></code>, and then have its main bin executed -- presumably creating or updating <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package.json</strong></code> and running any other initialization-related operations.</p><p name="6de9" id="6de9" class="graf graf--p graf-after--p">The init command is transformed to a corresponding <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npx</strong></code> operation as follows:</p><ul class="postList"><li name="6d24" id="6d24" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm init foo</strong></code> -&gt; <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npx create-foo</strong></code></li><li name="159c" id="159c" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm init @usr/foo</strong></code> -&gt; <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npx @usr/create-foo</strong></code></li><li name="675f" id="675f" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm init @usr</strong></code> -&gt; <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npx @usr/create</strong></code></li></ul><p name="3412" id="3412" class="graf graf--p graf-after--li">Any additional options will be passed directly to the command, so <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm init foo --hello</strong></code> will map to <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npx create-foo --hello</strong></code>.</p><p name="1c76" id="1c76" class="graf graf--p graf-after--p">If the initializer is omitted (by just calling <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm init</strong></code>), init will fall back to legacy init behavior. It will ask you a bunch of questions, and then write a package.json for you. It will attempt to make reasonable guesses based on existing fields, dependencies, and options selected. It is strictly additive, so it will keep any fields and values that were already set. You can also use <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">-y</strong></code>/<code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--yes</strong></code> to skip the questionnaire altogether. If you pass <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--scope</strong></code>, it will create a scoped package.</p><h3 name="cfa7" id="cfa7" class="graf graf--h3 graf-after--p">npm install</h3><h3 name="63f3" id="63f3" class="graf graf--h3 graf-after--h3">Install a package</h3><h3 name="e827" id="e827" class="graf graf--h3 graf-after--h3">Synopsis</h3><pre name="4111" id="4111" class="graf graf--pre graf-after--h3"><code class="markup--code markup--pre-code">npm install (with no args, in package dir)<br>npm install [&lt;@scope&gt;/]&lt;name&gt;<br>npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;tag&gt;<br>npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version&gt;<br>npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version range&gt;<br>npm install &lt;alias&gt;@npm:&lt;name&gt;<br>npm install &lt;git-host&gt;:&lt;git-user&gt;/&lt;repo-name&gt;<br>npm install &lt;git repo url&gt;<br>npm install &lt;tarball file&gt;<br>npm install &lt;tarball url&gt;<br>npm install &lt;folder&gt;</code></pre><pre name="7dbf" id="7dbf" class="graf graf--pre graf-after--pre"><code class="markup--code markup--pre-code">aliases: npm i, npm add<br>common options: [-P|--save-prod|-D|--save-dev|-O|--save-optional] [-E|--save-exact] [-B|--save-bundle] [--no-save] [--dry-run]</code></pre><h3 name="e8dd" id="e8dd" class="graf graf--h3 graf-after--pre">Description</h3><p name="d91b" id="d91b" class="graf graf--p graf-after--h3">This command installs a package, and any packages that it depends on. If the package has a package-lock or shrinkwrap file, the installation of dependencies will be driven by that, with an <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm-shrinkwrap.json</strong></code> taking precedence if both files exist. See <a href="http://127.0.0.1:5500/public/configuring-npm/package-lock-json" data-href="http://127.0.0.1:5500/public/configuring-npm/package-lock-json" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">package-lock.json</a> and <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/cli-commands/npm-shrinkwrap" data-href="http://127.0.0.1:5500/public/cli-commands/npm-shrinkwrap" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npm shrinkwrap</a></code>.</p><p name="066d" id="066d" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--p"><span class="graf-dropCap">A</span> <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package</strong></code> is:</p><ul class="postList"><li name="1e36" id="1e36" class="graf graf--li graf-after--p">a) a folder containing a program described by a <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/configuring-npm/package-json" data-href="http://127.0.0.1:5500/public/configuring-npm/package-json" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">package.json</a></code> file</li><li name="1312" id="1312" class="graf graf--li graf-after--li">b) a gzipped tarball containing (a)</li><li name="30f3" id="30f3" class="graf graf--li graf-after--li">c) a url that resolves to (b)</li><li name="8563" id="8563" class="graf graf--li graf-after--li">d) a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;name&gt;@&lt;version&gt;</strong></code> that is published on the registry (see <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/using-npm/registry" data-href="http://127.0.0.1:5500/public/using-npm/registry" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">registry</a></code>) with (c)</li><li name="4635" id="4635" class="graf graf--li graf-after--li">e) a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;name&gt;@&lt;tag&gt;</strong></code> (see <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/cli-commands/npm-dist-tag" data-href="http://127.0.0.1:5500/public/cli-commands/npm-dist-tag" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">npm dist-tag</a></code>) that points to (d)</li><li name="9a02" id="9a02" class="graf graf--li graf-after--li">f) a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;name&gt;</strong></code> that has a &quot;latest&quot; tag satisfying (e)</li><li name="23de" id="23de" class="graf graf--li graf-after--li">g) a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;git remote url&gt;</strong></code> that resolves to (a)</li></ul><blockquote name="f3d7" id="f3d7" class="graf graf--pullquote graf-after--li">Even if you never publish your package, you can still get a lot of benefits of using npm if you just want to write a node program (a), and perhaps if you also want to be able to easily install it elsewhere after packing it up into a tarball (b).</blockquote><ul class="postList"><li name="8f35" id="8f35" class="graf graf--li graf-after--pullquote"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install</strong></code> (in package directory, no arguments):</li><li name="c00a" id="c00a" class="graf graf--li graf-after--li">Install the dependencies in the local node_modules folder.</li><li name="a36b" id="a36b" class="graf graf--li graf-after--li">In global mode (ie, with <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-g</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">--global</strong></code> appended to the command), it installs the current package context (ie, the current working directory) as a global package.</li><li name="cda2" id="cda2" class="graf graf--li graf-after--li">By default, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install</strong></code> will install all modules listed as dependencies in <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/configuring-npm/package-json" data-href="http://127.0.0.1:5500/public/configuring-npm/package-json" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">package.json</a></code>.</li><li name="a0a9" id="a0a9" class="graf graf--li graf-after--li">With the <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">--production</strong></code> flag (or when the <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">NODE_ENV</strong></code> environment variable is set to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">production</strong></code>), npm will not install modules listed in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code>. To install all modules listed in both <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> when <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">NODE_ENV</strong></code> environment variable is set to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">production</strong></code>, you can use <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">--production=false</strong></code>.</li></ul><h4 name="81e1" id="81e1" class="graf graf--h4 graf-after--li">NOTE: The <code class="markup--code markup--h4-code"><strong class="markup--strong markup--h4-strong">--production</strong></code> flag has no particular meaning when adding a dependency to a project.</h4><p name="708e" id="708e" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install &lt;folder&gt;</strong></code>:</p><ul class="postList"><li name="b9be" id="b9be" class="graf graf--li graf-after--p">Install the package in the directory as a symlink in the current project. Its dependencies will be installed before it’s linked. If <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;folder&gt;</strong></code> sits inside the root of your project, its dependencies may be hoisted to the toplevel <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">node_modules</strong></code> as they would for other types of dependencies.</li><li name="447d" id="447d" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install &lt;tarball file&gt;</strong></code>:</li><li name="0354" id="0354" class="graf graf--li graf-after--li">Install a package that is sitting on the filesystem. Note: if you just want to link a dev directory into your npm root, you can do this more easily by using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm link</strong></code>.</li></ul><h4 name="d85a" id="d85a" class="graf graf--h4 graf-after--li">Tarball requirements:</h4><ul class="postList"><li name="921e" id="921e" class="graf graf--li graf-after--h4">The filename must use <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">.tar</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">.tar.gz</strong></code>, or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">.tgz</strong></code> as the extension.</li><li name="1afb" id="1afb" class="graf graf--li graf-after--li">The package contents should reside in a subfolder inside the tarball (usually it is called <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package/</strong></code>). npm strips one directory layer when installing the package (an equivalent of <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">tar x --strip-components=1</strong></code> is run).</li><li name="bb85" id="bb85" class="graf graf--li graf-after--li">The package must contain a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package.json</strong></code> file with <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">name</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">version</strong></code> properties.</li><li name="8e6f" id="8e6f" class="graf graf--li graf-after--li">Example:</li></ul><p name="f589" id="f589" class="graf graf--p graf-after--li"><code class="markup--code markup--p-code">npm install ./package.tgz</code></p><p name="0278" id="0278" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install &lt;tarball url&gt;</strong></code>:</p><ul class="postList"><li name="07bd" id="07bd" class="graf graf--li graf-after--p">Fetch the tarball url, and then install it. In order to distinguish between this and other options, the argument must start with “http://” or “https://”</li></ul><h4 name="bd5d" id="bd5d" class="graf graf--h4 graf-after--li">Example:</h4><p name="4e98" id="4e98" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code u-paddingRight0 u-marginRight0">npm install <a href="https://github.com/indexzero/forever/tarball/v0.5.6" data-href="https://github.com/indexzero/forever/tarball/v0.5.6" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://github.com/indexzero/forever/tarball/v0.5.6</a></code></p><p name="59ea" id="59ea" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install [&lt;@scope&gt;/]&lt;name&gt;</strong></code>:</p><p name="135e" id="135e" class="graf graf--p graf-after--p">Do a <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">&lt;name&gt;@&lt;tag&gt;</strong></code> install, where <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">&lt;tag&gt;</strong></code> is the &quot;tag&quot; config. (See <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/using-npm/config" data-href="http://127.0.0.1:5500/public/using-npm/config" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">config</a></code>. The config&#39;s default value is <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">latest</strong></code>.)</p><ul class="postList"><li name="82c5" id="82c5" class="graf graf--li graf-after--p">In most cases, this will install the version of the modules tagged as <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">latest</strong></code> on the npm registry.</li></ul><h4 name="0898" id="0898" class="graf graf--h4 graf-after--li">Example:</h4><p name="7941" id="7941" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install sax</code></p><p name="d317" id="d317" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install &lt;alias&gt;@npm:&lt;name&gt;</strong></code>:</p><blockquote name="a7b6" id="a7b6" class="graf graf--blockquote graf-after--p">Install a package under a custom alias. Allows multiple versions of a same-name package side-by-side, more convenient import names for packages with otherwise long ones and using git forks replacements or forked npm packages as replacements. Aliasing works only on your project and does not rename packages in transitive dependencies. Aliases should follow the naming conventions stated in <code class="markup--code markup--blockquote-code"><a href="https://www.npmjs.com/package/validate-npm-package-name#naming-rules" data-href="https://www.npmjs.com/package/validate-npm-package-name#naming-rules" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">validate-npm-package-name</a></code>.</blockquote><h4 name="9cdd" id="9cdd" class="graf graf--h4 graf-after--blockquote">Examples:</h4><p name="091f" id="091f" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install my-react@npm:react npm install jquery2@npm:jquery@2 npm install jquery3@npm:jquery@3 npm install npa@npm:npm-package-arg</code></p><ul class="postList"><li name="0b7d" id="0b7d" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install</strong></code> saves any specified packages into <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> by default. Additionally, you can control where and how they get saved with some additional flags:</li><li name="d1c7" id="d1c7" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-P, --save-prod</strong></code>: Package will appear in your <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code>. This is the default unless <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-D</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-O</strong></code> are present.</li><li name="e4be" id="e4be" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-D, --save-dev</strong></code>: Package will appear in your <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code>.</li><li name="fe2f" id="fe2f" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-O, --save-optional</strong></code>: Package will appear in your <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">optionalDependencies</strong></code>.</li><li name="b312" id="b312" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">--no-save</strong></code>: Prevents saving to <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code>.</li><li name="7c51" id="7c51" class="graf graf--li graf-after--li">When using any of the above options to save dependencies to your package.json, there are two additional, optional flags:</li><li name="e759" id="e759" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-E, --save-exact</strong></code>: Saved dependencies will be configured with an exact version rather than using npm&#39;s default semver range operator.</li><li name="3d6b" id="3d6b" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">-B, --save-bundle</strong></code>: Saved dependencies will also be added to your <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">bundleDependencies</strong></code> list.</li><li name="b547" id="b547" class="graf graf--li graf-after--li">Further, if you have an <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm-shrinkwrap.json</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package-lock.json</strong></code> then it will be updated as well.</li><li name="bbe4" id="bbe4" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;scope&gt;</strong></code> is optional. The package will be downloaded from the registry associated with the specified scope. If no registry is associated with the given scope the default registry is assumed. See <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/using-npm/scope" data-href="http://127.0.0.1:5500/public/using-npm/scope" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">scope</a></code>.</li><li name="9e5d" id="9e5d" class="graf graf--li graf-after--li">Note: if you do not include the @-symbol on your scope name, npm will interpret this as a GitHub repository instead, see below. Scopes names must also be followed by a slash.</li></ul><h4 name="a914" id="a914" class="graf graf--h4 graf-after--li">Examples:</h4><p name="2f95" id="2f95" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install sax npm install githubname/reponame</code></p><p name="cf22" id="cf22" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">npm install @myorg/privatepackage</code></p><p name="83af" id="83af" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">npm install node-tap --save-dev</code></p><p name="88f8" id="88f8" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">npm install dtrace-provider --save-optional</code></p><p name="f1cb" id="f1cb" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">npm install readable-stream --save-exact</code></p><p name="3e12" id="3e12" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code">npm install ansi-regex --save-bundle</code></p><ul class="postList"><li name="c557" id="c557" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Note</strong>: If there is a file or folder named <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;name&gt;</strong></code> in the current working directory, then it will try to install that, and only try to fetch the package by name if it is not valid.</li><li name="6899" id="6899" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;tag&gt;</strong></code>:</li><li name="aa9a" id="aa9a" class="graf graf--li graf-after--li">Install the version of the package that is referenced by the specified tag. If the tag does not exist in the registry data for that package, then this will fail.</li></ul><h4 name="3d31" id="3d31" class="graf graf--h4 graf-after--li">Example:</h4><p name="41c2" id="41c2" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install sax@latest npm install @myorg/mypackage@latest</code></p><p name="5999" id="5999" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version&gt;</strong></code>:</p><ul class="postList"><li name="3d5e" id="3d5e" class="graf graf--li graf-after--p">Install the specified version of the package. This will fail if the version has not been published to the registry.</li></ul><h4 name="4f6a" id="4f6a" class="graf graf--h4 graf-after--li">Example:</h4><p name="c722" id="c722" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install sax@0.1.1 npm install @myorg/privatepackage@1.5.0</code></p><p name="5091" id="5091" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install [&lt;@scope&gt;/]&lt;name&gt;@&lt;version range&gt;</strong></code>:</p><ul class="postList"><li name="e303" id="e303" class="graf graf--li graf-after--p">Install a version of the package matching the specified version range. This will follow the same rules for resolving dependencies described in <code class="markup--code markup--li-code"><a href="http://127.0.0.1:5500/public/configuring-npm/package-json" data-href="http://127.0.0.1:5500/public/configuring-npm/package-json" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">package.json</a></code>.</li></ul><blockquote name="1426" id="1426" class="graf graf--pullquote graf-after--li">Note that most version ranges must be put in quotes so that your shell will treat it as a single argument.</blockquote><h4 name="829e" id="829e" class="graf graf--h4 graf-after--pullquote">Example:</h4><p name="8844" id="8844" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install sax@&quot;&gt;=0.1.0 &lt;0.2.0&quot; npm install @myorg/privatepackage@&quot;&gt;=0.1.0 &lt;0.2.0&quot;</code></p><p name="78db" id="78db" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install &lt;git remote url&gt;</strong></code>:</p><blockquote name="c2f4" id="c2f4" class="graf graf--blockquote graf-after--p">Installs the package from the hosted git provider, cloning it with <code class="markup--code markup--blockquote-code"><strong class="markup--strong markup--blockquote-strong">git</strong></code>. For a full git remote url, only that URL will be attempted.</blockquote><p name="8da5" id="8da5" class="graf graf--p graf-after--blockquote"><code class="markup--code markup--p-code">&lt;protocol&gt;://[&lt;user&gt;[:&lt;password&gt;]@]&lt;hostname&gt;[:&lt;port&gt;][:][/]&lt;path&gt;[#&lt;commit-ish&gt; | #semver:&lt;semver&gt;]</code></p><ul class="postList"><li name="d169" id="d169" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;protocol&gt;</strong></code> is one of <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git+ssh</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git+http</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git+https</strong></code>, or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git+file</strong></code>.</li><li name="5bf2" id="5bf2" class="graf graf--li graf-after--li">If <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> is provided, it will be used to clone exactly that commit. If the commit-ish has the format <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;semver&gt;</strong></code> can be any valid semver range or exact version, and npm will look for any tags or refs matching that range in the remote repository, much as it would for a registry dependency. If neither <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code> is specified, then the default branch of the repository is used.</li><li name="c468" id="c468" class="graf graf--li graf-after--li">If the repository makes use of submodules, those submodules will be cloned as well.</li><li name="33df" id="33df" class="graf graf--li graf-after--li">If the package being installed contains a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prepare</strong></code> script, its <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> will be installed, and the prepare script will be run, before the package is packaged and installed.</li><li name="3946" id="3946" class="graf graf--li graf-after--li">The following git environment variables are recognized by npm and will be added to the environment when running git:</li><li name="5809" id="5809" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_ASKPASS</strong></code></li><li name="a901" id="a901" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_EXEC_PATH</strong></code></li><li name="4c5e" id="4c5e" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_PROXY_COMMAND</strong></code></li><li name="de94" id="de94" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_SSH</strong></code></li><li name="96dc" id="96dc" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_SSH_COMMAND</strong></code></li><li name="2855" id="2855" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_SSL_CAINFO</strong></code></li><li name="1fef" id="1fef" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">GIT_SSL_NO_VERIFY</strong></code></li><li name="96d5" id="96d5" class="graf graf--li graf-after--li">See the git man page for details.</li></ul><h4 name="0fc0" id="0fc0" class="graf graf--h4 graf-after--li">Examples:</h4><p name="bf37" id="bf37" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install git+ssh://git@github.com:npm/cli.git#v1.0.27 npm install git+ssh://git@github.com:npm/cli#semver:^5.0 npm install git+https://isaacs@github.com/npm/cli.git npm install git://github.com/npm/cli.git#v1.0.27 GIT_SSH_COMMAND=&#39;ssh -i ~/.ssh/custom_ident&#39; npm install git+ssh://git@github.com:npm/cli.git</code></p><p name="44d6" id="44d6" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install &lt;githubname&gt;/&lt;githubrepo&gt;[#&lt;commit-ish&gt;]</strong></code>:</p><p name="4383" id="4383" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install github:&lt;githubname&gt;/&lt;githubrepo&gt;[#&lt;commit-ish&gt;]</strong></code>:</p><ul class="postList"><li name="aee0" id="aee0" class="graf graf--li graf-after--p">Install the package at <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">https://github.com/githubname/githubrepo</strong></code> by attempting to clone it using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git</strong></code>.</li><li name="641e" id="641e" class="graf graf--li graf-after--li">If <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> is provided, it will be used to clone exactly that commit. If the commit-ish has the format <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;semver&gt;</strong></code> can be any valid semver range or exact version, and npm will look for any tags or refs matching that range in the remote repository, much as it would for a registry dependency. If neither <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code> is specified, then <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">master</strong></code> is used.</li><li name="2492" id="2492" class="graf graf--li graf-after--li">As with regular git dependencies, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> will be installed if the package has a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prepare</strong></code> script, before the package is done installing.</li></ul><h4 name="9336" id="9336" class="graf graf--h4 graf-after--li">Examples:</h4><p name="2e9b" id="2e9b" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install mygithubuser/myproject npm install github:mygithubuser/myproject</code></p><p name="5d5e" id="5d5e" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install gist:[&lt;githubname&gt;/]&lt;gistID&gt;[#&lt;commit-ish&gt;|#semver:&lt;semver&gt;]</strong></code>:</p><ul class="postList"><li name="eecb" id="eecb" class="graf graf--li graf-after--p">Install the package at <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">https://gist.github.com/gistID</strong></code> by attempting to clone it using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git</strong></code>. The GitHub username associated with the gist is optional and will not be saved in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">package.json</strong></code>.</li><li name="7541" id="7541" class="graf graf--li graf-after--li">As with regular git dependencies, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> will be installed if the package has a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prepare</strong></code> script, before the package is done installing.</li><li name="b4f6" id="b4f6" class="graf graf--li graf-after--li">Example:</li><li name="e50b" id="e50b" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">npm install gist:101a11beef</code></li><li name="18f5" id="18f5" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">npm install bitbucket:&lt;bitbucketname&gt;/&lt;bitbucketrepo&gt;[#&lt;commit-ish&gt;]</strong></code>:</li><li name="d419" id="d419" class="graf graf--li graf-after--li">Install the package at <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">https://bitbucket.org/bitbucketname/bitbucketrepo</strong></code> by attempting to clone it using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git</strong></code>.</li><li name="0499" id="0499" class="graf graf--li graf-after--li">If <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> is provided, it will be used to clone exactly that commit. If the commit-ish has the format <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;semver&gt;</strong></code> can be any valid semver range or exact version, and npm will look for any tags or refs matching that range in the remote repository, much as it would for a registry dependency. If neither <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code> is specified, then <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">master</strong></code> is used.</li><li name="66d5" id="66d5" class="graf graf--li graf-after--li">As with regular git dependencies, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> will be installed if the package has a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prepare</strong></code> script, before the package is done installing.</li></ul><h4 name="53cb" id="53cb" class="graf graf--h4 graf-after--li">Example:</h4><p name="665c" id="665c" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install bitbucket:mybitbucketuser/myproject</code></p><p name="5ff2" id="5ff2" class="graf graf--p graf-after--p"><code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm install gitlab:&lt;gitlabname&gt;/&lt;gitlabrepo&gt;[#&lt;commit-ish&gt;]</strong></code>:</p><ul class="postList"><li name="0a7e" id="0a7e" class="graf graf--li graf-after--p">Install the package at <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">https://gitlab.com/gitlabname/gitlabrepo</strong></code> by attempting to clone it using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">git</strong></code>.</li><li name="4201" id="4201" class="graf graf--li graf-after--li">If <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> is provided, it will be used to clone exactly that commit. If the commit-ish has the format <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code>, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">&lt;semver&gt;</strong></code> can be any valid semver range or exact version, and npm will look for any tags or refs matching that range in the remote repository, much as it would for a registry dependency. If neither <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#&lt;commit-ish&gt;</strong></code> or <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">#semver:&lt;semver&gt;</strong></code> is specified, then <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">master</strong></code> is used.</li><li name="3536" id="3536" class="graf graf--li graf-after--li">As with regular git dependencies, <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">dependencies</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">devDependencies</strong></code> will be installed if the package has a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">prepare</strong></code> script, before the package is done installing.</li></ul><h4 name="a26e" id="a26e" class="graf graf--h4 graf-after--li">Example:</h4><p name="bba2" id="bba2" class="graf graf--p graf-after--h4"><code class="markup--code markup--p-code">npm install gitlab:mygitlabuser/myproject npm install gitlab:myusr/myproj#semver:^5.0</code></p><p name="f85c" id="f85c" class="graf graf--p graf-after--p">You may combine multiple arguments, and even multiple types of arguments. For example:</p><pre name="13e6" id="13e6" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">npm install sax@&quot;&gt;=0.1.0 &lt;0.2.0&quot; bench supervisor</code></pre><p name="e848" id="e848" class="graf graf--p graf-after--pre">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--tag</strong></code> argument will apply to all of the specified install targets. If a tag with the given name exists, the tagged version is preferred over newer versions.</p><p name="224d" id="224d" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--dry-run</strong></code> argument will report in the usual way what the install would have done without actually installing anything.</p><p name="6851" id="6851" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--package-lock-only</strong></code> argument will only update the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package-lock.json</strong></code>, instead of checking <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code> and downloading dependencies.</p><p name="8c79" id="8c79" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">-f</strong></code> or <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--force</strong></code> argument will force npm to fetch remote resources even if a local copy exists on disk.</p><pre name="ac33" id="ac33" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">npm install sax --force</code></pre><p name="0c4c" id="0c4c" class="graf graf--p graf-after--pre">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-fund</strong></code> argument will hide the message displayed at the end of each install that acknowledges the number of dependencies looking for funding. See <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">npm-fund(1)</strong></code></p><p name="be10" id="be10" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">-g</strong></code> or <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--global</strong></code> argument will cause npm to install the package globally rather than locally. See <a href="http://127.0.0.1:5500/public/configuring-npm/folders" data-href="http://127.0.0.1:5500/public/configuring-npm/folders" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">folders</a>.</p><p name="ed36" id="ed36" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--global-style</strong></code> argument will cause npm to install the package into your local <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code> folder with the same layout it uses with the global <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code> folder. Only your direct dependencies will show in <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code> and everything they depend on will be flattened in their <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">node_modules</strong></code> folders. This obviously will eliminate some deduping.</p><p name="698e" id="698e" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--ignore-scripts</strong></code> argument will cause npm to not execute any scripts defined in the package.json. See <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/using-npm/scripts" data-href="http://127.0.0.1:5500/public/using-npm/scripts" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">scripts</a></code>.</p><p name="e30a" id="e30a" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--legacy-bundling</strong></code> argument will cause npm to install the package such that versions of npm prior to 1.4, such as the one included with node 0.8, can install the package. This eliminates all automatic deduping.</p><p name="479f" id="479f" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--link</strong></code> argument will cause npm to link global installs into the local space in some cases.</p><p name="9789" id="9789" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-bin-links</strong></code> argument will prevent npm from creating symlinks for any binaries the package might contain.</p><p name="2b95" id="2b95" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-optional</strong></code> argument will prevent optional dependencies from being installed.</p><p name="b832" id="b832" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-shrinkwrap</strong></code> argument, which will ignore an available package lock or shrinkwrap file and use the package.json instead.</p><p name="bd89" id="bd89" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-package-lock</strong></code> argument will prevent npm from creating a <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package-lock.json</strong></code> file. When running with package-lock&#39;s disabled npm will not automatically prune your node modules when installing.</p><p name="f174" id="f174" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--nodedir=/path/to/node/source</strong></code> argument will allow npm to find the node source code so that npm can compile native modules.</p><p name="1c1b" id="1c1b" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--only={prod[uction]|dev[elopment]}</strong></code> argument will cause either only <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">devDependencies</strong></code> or only non-<code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">devDependencies</strong></code> to be installed regardless of the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">NODE_ENV</strong></code>.</p><p name="622c" id="622c" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--no-audit</strong></code> argument can be used to disable sending of audit reports to the configured registries. See <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/cli-commands/npm-install/npm-audit" data-href="http://127.0.0.1:5500/public/cli-commands/npm-install/npm-audit" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">npm-audit</a></code> for details on what is sent.</p><p name="4133" id="4133" class="graf graf--p graf-after--p">See <code class="markup--code markup--p-code"><a href="http://127.0.0.1:5500/public/using-npm/config" data-href="http://127.0.0.1:5500/public/using-npm/config" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">config</a></code>. Many of the configuration params have some effect on installation, since that&#39;s most of what npm does.</p><h4 name="1f19" id="1f19" class="graf graf--h4 graf-after--p">Algorithm</h4><p name="0b26" id="0b26" class="graf graf--p graf-after--h4">To install a package, npm uses the following algorithm:</p><pre name="1be2" id="1be2" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">load the existing node_modules tree from disk<br>clone the tree<br>fetch the package.json and assorted metadata and add it to the clone<br>walk the clone and add any missing dependencies<br>  dependencies will be added as close to the top as is possible<br>  without breaking any other modules<br>compare the original tree with the cloned tree and make a list of<br>actions to take to convert one to the other<br>execute all of the actions, deepest first<br>  kinds of actions are install, update, remove and move</code></pre><p name="4e25" id="4e25" class="graf graf--p graf-after--pre">For this <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">package{dep}</strong></code> structure: <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A{B,C}, B{C}, C{D}</strong></code>, this algorithm produces:</p><pre name="8bd2" id="8bd2" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">A<br>+-- B<br>+-- C<br>+-- D</code></pre><p name="8608" id="8608" class="graf graf--p graf-after--pre">That is, the dependency from B to C is satisfied by the fact that A already caused C to be installed at a higher level. D is still installed at the top level because nothing conflicts with it.</p><p name="e03d" id="e03d" class="graf graf--p graf-after--p">For <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A{B,C}, B{C,D@1}, C{D@2}</strong></code>, this algorithm produces:</p><pre name="ab8d" id="ab8d" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">A<br>+-- B<br>+-- C<br>   `-- D@2<br>+-- D@1</code></pre><p name="de12" id="de12" class="graf graf--p graf-after--pre">Because B’s D@1 will be installed in the top level, C now has to install D@2 privately for itself. This algorithm is deterministic, but different trees may be produced if two dependencies are requested for installation in a different order.</p><p name="9b64" id="9b64" class="graf graf--p graf-after--p">See <a href="http://127.0.0.1:5500/public/configuring-npm/folders" data-href="http://127.0.0.1:5500/public/configuring-npm/folders" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">folders</a> for a more detailed description of the specific folder structures that npm creates.</p><h3 name="7f53" id="7f53" class="graf graf--h3 graf-after--p">Limitations of npm’s Install Algorithm</h3><p name="6fd1" id="6fd1" class="graf graf--p graf-after--h3">npm will refuse to install any package with an identical name to the current package. This can be overridden with the <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">--force</strong></code> flag, but in most cases can simply be addressed by changing the local package name.</p><p name="bc22" id="bc22" class="graf graf--p graf-after--p">There are some very rare and pathological edge-cases where a cycle can cause npm to try to install a never-ending tree of packages. Here is the simplest case:</p><pre name="4883" id="4883" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">A -&gt; B -&gt; A&#39; -&gt; B&#39; -&gt; A -&gt; B -&gt; A&#39; -&gt; B&#39; -&gt; A -&gt; ...</code></pre><p name="e37a" id="e37a" class="graf graf--p graf-after--pre">where <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A</strong></code> is some version of a package, and <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A&#39;</strong></code> is a different version of the same package. Because <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">B</strong></code> depends on a different version of <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A</strong></code> than the one that is already in the tree, it must install a separate copy. The same is true of <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A&#39;</strong></code>, which must install <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">B&#39;</strong></code>. Because <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">B&#39;</strong></code> depends on the original version of <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">A</strong></code>, which has been overridden, the cycle falls into infinite regress.</p><p name="541f" id="541f" class="graf graf--p graf-after--p">To avoid this situation, npm flat-out refuses to install any <code class="markup--code markup--p-code"><strong class="markup--strong markup--p-strong">name@version</strong></code> that is already present anywhere in the tree of package folder ancestors. A more correct, but more complex, solution would be to symlink the existing version into the new location. If this ever affects a real use-case, it will be investigated.</p><p name="9688" id="9688" class="graf graf--p graf-after--p graf--trailing"><a href="https://bryanguner.medium.com/membership" data-href="https://bryanguner.medium.com/membership" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://bryanguner.medium.com/membership</a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@bryanguner" class="p-author h-card">Bryan Guner</a> on <a href="https://medium.com/p/6a33e7f6ed85"><time class="dt-published" datetime="2021-09-29T20:48:14.899Z">September 29, 2021</time></a>.</p><p><a href="https://medium.com/@bryanguner/understanding-npm-6a33e7f6ed85" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 14, 2021.</p></footer></article></body></html>